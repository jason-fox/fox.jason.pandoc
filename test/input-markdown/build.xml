<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="unit-test">
	<import file="../bootstrap.xml"/>
	<description>
		Expect that Pandoc can create a DITA file using Pandoc flavoured markdown as an input.
	</description>
	<target name="unit-test">

		<exec-transtype transtype="dita"/>
		<xmltask expandEntityReferences="false"
			dest="${basedir}/out/markdown.md" 
			outputter="simple" 
			source="${basedir}/out/markdown.md">
			<xmlcatalog>
				<dtd publicId="-//OASIS//DTD DITA Topic//EN" 
				location="${dita.dir}/plugins/fox.jason.passthrough/resource/fake.dtd"/>
			</xmlcatalog>
		</xmltask>
		<replace file="${basedir}/out/markdown.md" token="&amp;#8217;" value="'"/>
		<replace file="${basedir}/out/markdown.md" token="&amp;#8230;" value="..."/>
		<replace file="${basedir}/out/markdown.md" token="&amp;#8211;" value="--"/>

		<compare-output suffix=".xml" result="${basedir}/out/markdown.md"/>
	</target>
</project>
